---
layout: post
title: "π“… Spring κ°•μλ…ΈνΈ"
excerpt: " Spring ν•µμ‹¬ μ›λ¦¬μ— λ€ν• κ°•μ β‘  "
subtitle: "μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ - κΈ°λ³ΈνΈ"
toc: true
toc_sticky: true
toc_label: "νμ΄μ§€ μ£Όμ” λ©μ°¨"
date: 2022-2-25
tags: [Spring]
---

### About Spring 

- JPA:  DB ν…μ΄λΈ”κ³Ό μλ°” κ°μ²΄ μ‚¬μ΄μ λ§¤ν•‘μ„ μ²λ¦¬ν•΄μ£Όλ” ORM κΈ°μ μ ν‘μ¤€   
- Hibernate - JPA ν”„λ΅λ°”μ΄λ”μ ν• μΆ…λ¥, Nodeμ sequelizeμ™€ λ™μΌ
  
#### JPAμ νΉμ§•

  - SQL μƒμ„±
  - κ°μ²΄λ¥Ό ν†µν•΄ μΏΌλ¦¬λ¥Ό μμ„±ν•  μ μλ” JPQL μ§€μ›
  - μ„±λ¥ ν–¥μƒμ„ μ„ν• λ‡κ°€μ§€ κΈ°λ²• μ κ³µ 

  - Spring & JPAκ°€ κ°€μ¥ main κΈ°μ μ„ 

#### Spring: μ—¬λ¬κ°€μ§€ κΈ°μ μ λ¨μ  

  - rest: μ¤ν”„λ§ DI μ»¨ν…μ΄λ„, AOP μ΄λ²¤νΈ, κΈ°νƒ€
  - μ›Ή κΈ°μ : μ¤ν”„λ§ MVC, WebFlux  
  - λ¬Έλ§¥μ— λ”°λΌ λ‹¨μ–΄κ°€ λ‹¤λ¥΄κ² μ‚¬μ©
    - μ¤ν”„λ§ DI μ»¨ν…μ΄λ„ κΈ°μ 
    - μ¤ν”„λ§ ν”„λ μ„μ›ν¬ μμ²΄
    - μ¤ν”„λ§ λ¶€νΈ, ν”„λ μ„μ›ν¬ λ“±μ„ λ¨λ‘ ν¬ν•¨ν• μƒνƒκ³„λ¥Ό μ§€μΉ­
  
#### Spring boot: μ¤ν”„λ§μ„ νΈλ¦¬ν•κ² μ‚¬μ©ν•  μ μλ„λ΅ μ§€μ› 

  - λ‹¨λ…μΌλ΅ μ‹¤ν•Όν•  μ μλ” μ¤ν”„λ§ appμ„ μ‰½κ² μƒμ„±
  - μ†μ‰¬μ΄ λΉλ“ κµ¬μ„±μ„ μ„ν• starter μΆ…μ†μ„± μ κ³µ
  - 3rd λΌμ΄λΈλ¬λ¦¬ μλ™ κµ¬μ„± 
  - λ©”νΈλ¦­, μƒνƒν™•μΈ, μ™Έλ¶€ κµ¬μ„± κ°™μ€ ν”„λ΅λ•μ… μ¤€λΉ„ κΈ°λ¥ μ κ³µ 
  - κ΄€λ΅€μ— μν• κ°„κ²°ν• μ„¤μ • 
  - μ¤ν”„λ§ ν”„λ μ„μ›ν¬λ¥Ό μ΄μ©ν•κΈ° μ‰½κ² λ„μ™€μ£Όλ” μ—­ν• 

#### ν•µμ‹¬ κ°λ…

  μ‚¬μ©λ²•λ§ μ•λ‹¤κ³  ν•΄λ‹Ή μ¤νƒμ„ μ™„λ²½ν•κ² μ΄ν•΄ν–λ‹¤κ³  λ³Ό μ μ—†μ. ν•µμ‹¬ κ°λ…μ— λ€ν•΄μ„ μ•μ•„μ•Ό ν•¨
  - μ™ λ§λ“¤μ—λ”κ°€? ν•µμ‹¬ μ»¨μ…‰μ€?
  - μΆ‹μ€ κ°μ²΄ μ§€ν–¥ appμ„ κ°λ°ν•  μ μκ² λ„μ™€μ£Όλ” ν”„λ μ„μ›ν¬

### μΆ‹μ€ κ°μ²΄ μ§€ν–¥ νΉμ§•?

  > μ»΄ν“¨ν„°λ¥Ό λ…λ Ήμ–΄μ λ©λ΅μΌλ΅ λ³΄λ” μ‹κ°μ—μ„ λ²—μ–΄λ‚ μ—¬λ¬ κ°μ λ…λ¦½λ λ‹¨μ„, μ¦‰ "κ°μ²΄"λ“¤μ λ¨μ„μΌλ΅ νμ•…ν•λ” κ²ƒ

  - ν”„λ΅κ·Έλ¨μ„ μ μ—°ν•κ³  λ³€κ²½μ΄ μ©μ΄ν•κ² λ§λ“¤κΈ° λ•λ¬Έμ— λ€κ·λ¨ μ†ν”„νΈμ›¨μ–΄ κ°λ°μ— λ§μ΄ μ‚¬μ©
  - **μ—­ν• **κ³Ό **κµ¬ν„**μΌλ΅ κµ¬λ¶„ν•μ—¬ μ„Έμƒμ„ λ‹¨μν™”μ‹ν‚΄ (ex. μ΄μ „μ - μλ™μ°¨, κ³µμ—°λ¬΄λ€, μ •λ ¬ μ•κ³ λ¦¬μ¦, ν• μΈ μ •μ±… λ΅μ§ λ“±λ“±)
  - ν΄λΌμ΄μ–ΈνΈλ” λ‚΄λ¶€ κµ¬μ΅°λ¥Ό λ°λΌλ„ λλ©° μΈν„°νμ΄μ¤(λ€μƒμ μ—­ν• )λ§ μ•λ©΄ λ¨. λν• κµ¬ν„ λ€μƒ μμ²΄λ¥Ό λ³€κ²½ν•΄λ„ μν–¥μ„ λ°›μ§€ μ•μ
  - κ°μ²΄ μ„¤κ³„ μ‹ μƒλ€μ μΌλ΅ μ¤‘μ”ν• μ—­ν• (interface)λ¥Ό λ¨Όμ € λ¶€μ—¬ν•κ³ , κ·Έ μ—­ν• μ„ μν–‰ν•λ” κµ¬ν„ κ°μ²΄ λ§λ“¤κΈ°

#### λ‹¤ν•μ„±μ λ³Έμ§

  - μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό μ‹¤ν–‰ μ‹μ μ— μ μ—°ν•κ² λ³€κ²½ κ°€λ¥ -> ν΄λΌμ΄μ–ΈνΈλ¥Ό λ³€κ²½ X, μ„λ²„μ κµ¬ν„ κΈ°λ¥μ„ μ μ—°ν•κ² λ³€κ²½ κ°€λ¥
  - κ°€μ¥ λ³€κ²½μ΄ μ—†λ” λ°©ν–¥μΌλ΅ μΈν„°νμ΄μ¤λ¥Ό μ„¤κ³„ν•λ” κ²ƒμ΄ μ μΌ μ¤‘μ”

#### μ¤ν”„λ§κ³Ό κ°μ²΄ μ§€ν–¥  

  - μ¤ν”„λ§μ€ **λ‹¤ν•μ„±**μ„ κ·Ήλ€ν™”ν•΄μ„ μ΄μ©ν•  μ μκ² λ„μ™€μ¤ 
  - ν•μ§€λ§ λ‹¤ν•μ„± λ§μΌλ΅λ” μ‰½κ² λ¶€ν’μ„ κ°μ•„ λΌμ°λ“―μ΄ κ°λ° λ¶κ°€ (OCP, DIP X)
  - μ μ–΄μ μ—­μ „, μμ΅΄κ΄€κ³„ μ£Όμ…μ€ λ‹¤ν•μ„±μ„ ν™μ©ν•΄μ„ μ—­ν• κ³Ό κµ¬ν„μ„ νΈλ¦¬ν•κ² λ‹¤λ£° μ μλ„λ΅ μ§€μ›  
  
### SOLID: μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™

  - SRP λ‹¨μΌ μ±…μ„ μ›μΉ™ (Single Responsibility Principle): ν•λ‚μ ν΄λμ¤λ” ν•λ‚μ μ±…μ„λ§ κ°€μ§, ν•λ‚μ μ±…μ„μ΄λΌλ” κ²ƒμ€ λ¨νΈν•  μ μμ.
λ‹¤μ‹ λ§ν•΄ λ³€κ²½μ΄ μμ„ λ• νκΈ‰ ν¨κ³Όκ°€ μ μΌλ©΄ λ‹¨μΌ μ±…μ„ μ›μΉ™μ„ μ λ”°λ¥Έ κ²ƒ ex) UI λ³€κ²½, κ°μ²΄μ μƒμ„±κ³Ό μ‚¬μ©μ„ λ¶„λ¦¬  
  
  - OCP κ°λ°©-νμ‡„ λ²•μΉ™ (Open/Closed Principle): μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ¥μ—λ” μ—΄λ ¤ μμΌλ‚ λ³€κ²½μ—λ” λ‹«ν€(ν•„μ”μ—†λ‹¤) μμ–΄μ•Ό ν•¨. μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• 
μƒλ΅μ΄ ν΄λμ¤λ¥Ό ν•λ‚ λ§λ“¤μ–΄μ„ μƒλ΅μ΄ κΈ°λ¥μ„ κµ¬ν„ν•λ” λ°©λ²•μΌλ΅ λ³€κ²½μ„ λ€μ²΄, μ‚¬μ© μμ—­κ³Ό κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κµ¬μ„±ν•λ” μμ—­ λ‘κ°€μ§€λ΅ λ¶„λ¦¬

    ```java
    public class MemberService { // MemberService ν΄λΌμ΄μ–ΈνΈκ°€ κµ¬ν„ ν΄λμ¤λ¥Ό μ§μ ‘ μ„ νƒ
        private MemberRepository memberRepository = new MemoryMemberrepository(); // κΈ°μ΅΄ μ½”λ“
    }
    
    public class MemberService {
        private MemberRepository memberRepository = new jdbcMemberrepository(); // λ³€κ²½ μ½”λ“
    }
    // ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•΄μ•Όν•λ©°, λ‹¤ν•μ„±μ„ μ‚¬μ©ν–μ§€λ§ 
    ```

  - LSP λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™ (Liskov Substitution principle): ν”„λ΅κ·Έλ¨μ κ°μ²΄λ” ν”„λ΅κ·Έλ¨μ μ •ν™•μ„±μ„ κΉ¨λ¨λ¦¬μ§€ μ•μΌλ©΄μ„ ν•μ„ νƒ€μ…μ μΈμ¤ν„΄μ¤λ΅ 
λ°”κΏ€ μ μμ–΄μ•Ό ν•¨. ex) μ—‘μ…€μ€ ν›„μ§„μ΄ μ•„λ‹λΌ μ „μ§„ κΈ°λ¥λ§ λ‹΄λ‹Ήν•λ” μ—­ν•   
      
  - ISP μΈν„°νμ΄μ¤ λ¶„λ¦¬ μ›μΉ™ (Interface Segregation Principle): νΉμ • ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„ν• λ‹¤μμ μΈν„°νμ΄μ¤κ°€ λ²”μ© μΈν„°νμ΄μ¤ ν•λ‚λ³΄λ‹¤ λ‚«λ‹¤.
ex) μλ™μ°¨ μΈν„°νμ΄μ¤λ¥Ό μ΄μ „ λ° μ •λΉ„ μΈν„°νμ΄μ¤λ΅ λ‚λ„κ³ , μ‚¬μ©μ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ΄μ „μ λ° μ •λΉ„μ‚¬ ν΄λΌμ΄μ–ΈνΈλ΅ λ‚λ„λ©΄ μ •λΉ„ μΈν„°νμ΄μ¤ μμ²΄κ°€ λ³€ν•΄λ„ μ΄μ „μ
ν΄λΌμ΄μ–ΈνΈμ— μν–¥μ„ μ£Όμ§€ μ•μ. -> μΈν„°νμ΄μ¤κ°€ λ…ν™•ν•΄μ§€κ³  λ€μ²΄ κ°€λ¥μ„±μ΄ λ†’μ•„μ§  
    
  - DIP μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™ (Dependency inversion principle): κµ¬ν„ ν΄λμ¤μ— μμ΅΄ν•μ§€ λ§κ³ , μΈν„°νμ΄μ¤μ— μμ΅΄(=μ—­ν• )μ— μμ΅΄ν•΄μ•Ό ν•¨ 
  ex) μ‰λ³΄λ κ°€ μ•„λ‹λΌ μλ™μ°¨ μ—­ν• μ— λ€ν•΄μ„ μ¤‘μ”ν•κ² μ—¬κΈΈ κ²ƒ


### κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ™€ μ¤ν”„λ§ 

  - Spring DI container: 
  - λ¨λ“  μ„¤κ³„μ— μΈν„°νμ΄μ¤λ¥Ό λ¶€μ—¬ν•λ” λ°©ν–¥μΌλ΅ μ„¤κ³„

  - μΈν„°νμ΄μ¤λ¥Ό λ‚¨λ°ν•λ©΄ 'μ¶”μƒν™”'λΌλ” λΉ„μ©μ΄ λ°μƒ -> μ½”λ“λ¥Ό λ‹¤μ‹ λ―μ–΄λ΄μ•Όν•λ” λΉ„μ©
  - κΈ°λ¥μ„ ν™•μ¥ν•  κ°€λ¥μ„±μ΄ μ—†λ‹¤λ©΄ κµ¬μ²΄ ν΄λμ¤λ¥Ό μ§μ ‘ μ‚¬μ©ν•κ³ , ν–¥ν›„ κΌ­ ν•„μ”ν•  λ• λ¦¬ν©ν† λ§ν•΄μ„ μΈν„°νμ΄μ¤λ¥Ό λ„μ…

### κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬ 

  - Springμ„ ν•λ‚μ κ³µμ—°μΌλ΅ λΉ„μ : μΈν„°νμ΄μ¤(μ—­ν• ), Sasha(λ‚¨μ£Ό, κµ¬ν„μ²΄), Lisa(μ—¬μ£Ό, κµ¬ν„μ²΄) 
    - λ°°μ°λ” λ³ΈμΈμ μ—­ν• μΈ λ°°μ—­μ„ μν–‰ν•λ” κ²ƒμ—λ§ μ§‘μ¤‘  
    - Sashaλ” μ–΄λ–¤ μ—¬μ£Όκ°€ μ„ νƒλλ”λΌλ„ λ‘κ°™μ΄ κ³µμ—°ν•  μ μμ–΄μ•Όν•¨  
    - κ³µμ—° κµ¬μ„±, λ‹΄λ‹Ήλ°°μ° μ„­μ™Έ, λ°°μ° μ§€μ • μ±…μ„μ„ λ‹΄λ‹Ήν•λ” λ³„λ„μ κ³µμ—° κΈ°νμ ν•„μ”  
    - κ³µμ—° κΈ°νμλ¥Ό λ§λ“¤κ³ , λ°°μ°μ™€ κ³µμ—° κΈ°νμμ μ±…μ„μ„ ν™•μ‹¤ν λ¶„λ¦¬   

    - AppConfig (κ³µμ—° κΈ°νμ): κµ¬ν„ κ°μ²΄μ **μƒμ„±**κ³Ό **μ—°κ²°**μ„ λ‹΄λ‹Ή, Sashaλ‚ Lisa μ…μ¥μ—μ„ λ³΄λ©΄ μμ΅΄κ΄€κ³„λ¥Ό λ§μΉ μ™Έλ¶€μ—μ„ μ£Όμ…ν•΄μ£Όλ” κ²ƒ 
    κ°™λ‹¤κ³  ν•΄μ„ Dependency Injection (μμ΅΄μ„± μ£Όμ…)μ΄λΌκ³  λ¶€λ¦„

### IoC, DI κ·Έλ¦¬κ³  μ»¨ν…μ΄λ„

  - Inversion of Control(μ μ–΄μ μ—­μ „): ν”„λ΅κ·Έλ¨ νλ¦„μ— λ€ν• μ μ–΄λ¥Ό AppConfigκ°€ κ°€μ Έκ°  
  β€» λ‚΄κ°€ μ‘μ„±ν• μ½”λ“λ¥Ό μ μ–΄ν•κ³  λ€μ‹  μ‹¤ν–‰ν•λ©΄ 'ν”„λ μ„μ›ν¬', λ‚΄κ°€ μ‘μ„±ν• μ½”λ“κ°€ μ§μ ‘ μ μ–΄μ νλ¦„μ„ λ‹΄λ‹Ήν•λ‹¤λ©΄ 'λΌμ΄λΈλ¬λ¦¬'

  - Dependency Injection: 
    - μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„: import μ½”λ“λ§ λ³΄κ³  μμ΅΄ κ΄€κ³„ μ‰½κ² νλ‹¨ κ°€λ¥
    - λ™μ μΈ κ°μ²΄(μΈμ¤ν„΄μ¤) μμ΅΄ κ΄€κ³„: **app μ‹¤ν–‰ μ‹μ **μ— μ™Έλ¶€μ—μ„ μ‹¤μ  κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ‹¤μ 
    μμ΅΄ κ΄€κ³„κ°€ μ—°κ²°
    - DI μ΄μ©μ‹, ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν•λ” λ€μƒμ νƒ€μ… μΈμ¤ν„΄μ¤ λ³€κ²½κ°€λ¥. λΏλ§ μ•„λ‹λΌ, μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό 
    λ³€κ²½ν•μ§€ μ•κ³  μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„ μ‰½κ² λ³€κ²½ κ°€λ¥
    
  - IcC μ»¨ν…μ΄λ„, **DI μ»¨ν…μ΄λ„**: AppConfigμ²λΌ κ°μ²΄ μƒμ„±/κ΄€λ¦¬ μμ΅΄κ΄€κ³„ μ—°κ²°ν•΄μ£Όλ” κ²ƒμ„ μ§€μΉ­. assembler νΉμ€ object factoryλΌκ³ λ„ ν•¨

